

<div class="layui-row">
    <div class="layui-col-xs6 layui-col-sm6 layui-col-md4">
        <div class="grid-demo grid-demo-bg1">&nbsp;</div>
    </div>
    <div class="layui-col-xs6 layui-col-sm6 layui-col-md4">
        <div class="grid-demo grid-demo-bg1">

            <div class="layui-upload-drag" id="test10" style="margin: 20px  10px">
                <i class="layui-icon"></i>
                <p id="upload-text">点击上传，或将文件拖拽到此处</p>
            </div>

            <br>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit="" id="test9"  lay-filter="demo1">开始上传</button>
                </div>
            </div>


        </div>
    </div>
    <div class="layui-col-xs4 layui-col-sm12 layui-col-md4">
        <div class="grid-demo layui-bg-blue"></div>
    </div>
</div>





<script>
    layui.use('upload', function(){
        var upload = layui.upload;

        //拖拽上传
        var uploadInst = upload.render({
            elem: '#test10'
            ,url: 'patent/khgl/excel/import' //上传接口
            ,accept: 'file'
            ,auto: false
            ,bindAction: '#test9'
            ,done: function(res){
                console.log(res)
                alert(res.message||"数据导入失败");
            }
            ,error: function(){
                //请求异常回调
            }
            ,choose: function(obj){
                var files = obj.pushFile();
                console.log(obj);

                obj.preview(function(index, file, result){
                    console.log(index); //得到文件索引
                    console.log(file); //得到文件对象

                    $("#upload-text").html(file.name);

                    console.log(result); //得到文件base64编码，比如图片

                    //obj.resetFile(index, file, '123.jpg'); //重命名文件名，layui 2.3.0 开始新增

                    //这里还可以做一些 append 文件列表 DOM 的操作

                    //obj.upload(index, file); //对上传失败的单个文件重新上传，一般在某个事件中使用
                    //delete files[index]; //删除列表中对应的文件，一般在某个事件中使用
                });
            }
        });
    });

    layui.use('laydate', function(){
        var laydate = layui.laydate;

        //执行一个laydate实例
        laydate.render({
            elem: '#test5' //指定元素
            ,type: 'datetime'
        });
    });


</script>